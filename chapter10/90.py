import pickle
from collections import defaultdict
import numpy as np
from gensim.models import word2vec
from pprint import pprint
fname_input = '81_out'
fname_word2vec_out = 'word2vec.txt'
fname_t_index = 't_index'
fname_matrix = 'matrix'

def make_matrix():
    sentences = word2vec.Text8Corpus('81_out')

    model = word2vec.Word2Vec(sentences, size=300, min_count=1, window=15)
    model.save("model_m1_win15")

def run_86(model):
    print(model.wv["United_States"])

def run_87(model):
    United_States_matrix = model.wv["United_States"]
    US_matrix = model.wv["U.S"]
    nolm = np.linalg.norm(United_States_matrix) * np.linalg.norm(US_matrix)
    print(np.dot(United_States_matrix, US_matrix) / nolm)

def run_88(model):
    pprint(model.wv.most_similar_cosmul(positive=["England"]))


def run_89(model):
    pprint(model.wv.most_similar_cosmul(positive=["Spain", "Athens"], negative=["Madrid"]))

def _90():    
    model = word2vec.Word2Vec.load("model")
    run_86(model)
    run_87(model)
    run_88(model)
    run_89(model)


if __name__ == "__main__":
    make_matrix()

"""
86
[ 1.25484276e+00 -1.82071626e+00 -1.99104857e+00  2.53494024e+00
  2.66033101e+00  1.18187785e+00  1.21700394e+00 -4.75260496e-01
  3.47101116e+00  5.59204638e-01  1.85785973e+00 -1.11404836e+00
 -6.07633293e-01 -2.51019537e-01 -8.92897785e-01 -1.25032735e+00
  4.22807038e-01  2.23747087e+00  5.55123627e-01 -9.71748829e-01
 -2.19199553e-01  8.58999670e-01  3.26407838e+00  4.69434202e-01
 -1.35905528e+00  3.79495287e+00  2.06424475e+00 -1.14935398e+00
  8.89436483e-01 -2.49693465e+00  1.88718423e-01 -1.84933221e+00
  4.89647210e-01  1.42632499e-01 -1.61886084e+00 -3.46447921e+00
  1.60514629e+00  2.53205824e+00  1.98686135e+00 -1.80734420e+00
 -2.18759131e+00  2.76701808e+00 -1.71039402e-01 -9.98208106e-01
  6.12281337e-02  4.48700875e-01 -3.23713875e+00  1.57491744e+00
  2.52482319e+00 -3.28391254e-01  8.08141708e-01 -2.77188158e+00
 -1.39755368e+00  3.97998095e+00  2.78254557e+00 -1.45446256e-01
  5.40135920e-01 -1.58485568e+00  1.96616375e+00  8.94585252e-01
 -9.88816261e-01 -4.65571374e-01  3.74512255e-01 -1.84426737e+00
 -1.05841589e+00  3.65255833e-01  1.43452799e+00  6.83351159e-01
 -5.17035425e-01  2.01608520e-02 -5.95852971e-01 -4.65510398e-01
  5.99400461e-01 -2.73098683e+00  2.28494263e+00  2.79660034e+00
  5.99816561e-01  1.94004118e+00 -1.93936646e+00  3.69289660e+00
 -3.67324352e+00 -3.30604100e+00 -6.56193554e-01  6.58116257e-03
  1.85395563e+00  2.61116552e+00 -1.98267365e+00 -2.81167555e+00
 -1.02936804e+00 -3.34777027e-01 -4.15945053e+00 -1.83087611e+00
  3.07191062e+00 -1.82857347e+00 -2.83446598e+00  6.29502714e-01
 -1.78168154e+00  2.35773716e-02 -1.13377547e+00 -5.86607933e+00
 -2.80660248e+00  9.74538088e-01 -3.01599336e+00  8.88618052e-01
  1.60706139e+00 -2.33428884e+00 -4.51200628e+00  2.22600341e-01
  1.96978283e+00  1.40372682e+00  2.48788762e+00  1.38324196e-03
  7.22249269e-01 -8.53015125e-01 -2.01263785e+00 -3.00909638e-01
  1.29449248e-01  2.67993450e-01  1.60168493e+00  1.53057826e+00
  4.30233383e+00 -2.31923485e+00  1.64740515e+00  5.16125023e-01
  1.48554146e+00  2.05280590e+00 -3.92845511e+00 -6.83870077e-01
 -1.48310864e+00 -2.02790666e+00 -2.34465528e+00  4.33761925e-01
  1.53590727e+00 -2.19053459e+00  2.86930013e+00  1.23067737e+00
  1.53967023e+00 -3.11805546e-01 -4.43951398e-01 -2.77988362e+00
 -4.20888662e+00  7.60995865e-01 -2.45654535e+00 -1.38584363e+00
 -1.03135407e+00 -1.31742501e+00 -8.72983098e-01 -7.50142813e-01
  7.96372414e-01  2.46740937e+00 -2.53609586e+00  6.12288892e-01
  1.00710106e+00 -8.89179826e-01  2.76424229e-01 -5.63348770e-01
  6.71222746e-01 -5.31492329e+00  2.79360175e+00  2.44424748e+00
 -4.69424391e+00 -1.60579711e-01  4.27683544e+00 -7.48091877e-01
  1.23600101e+00  2.40232396e+00  8.45327556e-01 -4.74563301e-01
 -2.63369942e+00  3.67288768e-01 -1.99556255e+00 -1.06364214e+00
  6.45691395e-01 -3.56189346e+00  3.02266932e+00  5.96398592e-01
 -2.16159558e+00  3.88784885e+00  4.57408220e-01 -1.77371812e+00
 -7.16068923e-01 -2.43533635e+00 -2.23064518e+00 -6.06320858e-01
 -7.04008222e-01 -1.74182045e+00 -1.12000704e+00 -1.17552829e+00
 -3.47769856e+00  1.99240911e+00  8.22635651e-01 -2.39530730e+00
 -2.01933980e+00 -1.87377725e-02 -1.67744851e+00 -2.14628324e-01
  1.92703485e+00 -8.29510391e-01 -7.40771413e-01  4.60444242e-01
  2.98711729e+00  4.11499649e-01  1.70875713e-01  1.63048729e-01
  3.15037417e+00 -2.44306833e-01 -1.56705952e+00  1.18758917e+00
  4.11141443e+00 -6.37074471e-01  1.53404996e-01  2.25610375e+00
 -3.22731405e-01 -3.36788327e-01  2.14714408e-01 -1.92725706e+00
  2.04916453e+00  3.96581709e-01 -2.82047677e+00  3.99422824e-01
  1.89784542e-01 -1.80557787e+00 -7.81750023e-01 -3.39081436e-01
 -3.26538891e-01  1.13956475e+00  1.86868727e+00 -6.62040532e-01
 -8.49095285e-01 -5.33475459e-01 -5.31497538e-01  3.57755661e+00
 -1.53463972e+00  4.21603583e-03  3.95918876e-01  1.51262343e+00
  1.70759320e-01 -7.57249177e-01  2.17626363e-01 -7.46569514e-01
 -5.66396356e-01 -3.78441381e+00  1.41300321e-01  1.78014481e+00
 -3.16750383e+00  3.50555968e+00  6.73666656e-01 -1.18406549e-01
  1.50190783e+00  3.28413796e+00  3.95778209e-01 -2.11407378e-01
  2.06863910e-01 -2.39391565e-01  1.00082183e+00 -2.39854585e-02
 -7.35779285e-01 -2.64073205e+00 -6.22978091e-01  1.94041729e+00
 -3.66354346e+00 -2.36299038e+00 -2.21769047e+00 -1.04759896e+00
 -1.70728751e-02  1.11728525e+00  2.98315138e-01 -2.57637620e+00
 -1.90487015e+00 -5.19655180e+00 -2.36841249e+00 -1.07597925e-01
 -1.03284907e+00 -2.45134783e+00 -3.89640284e+00  3.92217207e+00
 -3.89000082e+00 -2.13396978e+00 -1.83246410e+00  4.32660013e-01
 -5.15719950e-01  1.51550388e+00  9.13839638e-01 -6.06061071e-02
 -2.45446491e+00 -3.86373162e-01  9.00598526e-01 -2.44957387e-01
 -3.79596502e-01  1.48802900e+00 -9.01303649e-01  1.05987978e+00
  1.68384981e+00  4.12549686e+00 -2.08514404e+00 -1.08502233e+00
  2.83690929e-01 -3.10896069e-01 -4.51134396e+00 -8.15811396e-01]
87
0.8515309
88
[('Wales', 0.8185721039772034),
 ('Scotland', 0.816548764705658),
 ("England's", 0.8147960901260376),
 ('Essex', 0.812712550163269),
 ('Hampshire', 0.8083202242851257),
 ('Britain', 0.8032773733139038),
 ('Worcestershire', 0.7891743779182434),
 ('Northamptonshire', 0.7873683571815491),
 ('London', 0.7804561853408813),
 ('Sussex', 0.7784296274185181)]
89
[('Greece', 0.9626140594482422),
 ('Crete', 0.9105477333068848),
 ('Aegean', 0.8560402989387512),
 ('Greeks', 0.8476683497428894),
 ('Tenedos', 0.8449053168296814),
 ('Epirus', 0.8443186283111572),
 ('Peloponnese', 0.8415848016738892),
 ('Byzantium', 0.8413271903991699),
 ('Chios', 0.8401724100112915),
 ('Thessaly', 0.8398865461349487)]
"""